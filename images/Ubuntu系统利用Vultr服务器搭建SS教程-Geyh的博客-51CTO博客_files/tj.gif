var cssPath={getPN2:function(e,t){return this.path(e,t,[]).join(" > ")},classSelector:function(e){for(var t=e.split(/\s/g),o=[],n=0;n<t.length;++n)t[n].length>0&&o.push("."+t[n]);return o.join("")},nthChild:function(e){for(var t=0,o=e.parentNode.childNodes,n=0;n<o.length;++n)if(1===o[n].nodeType&&++t,o[n]===e)return t},path:function(e,t,o){var n=e.tagName.toLowerCase(),r=[n],i=e.getAttribute("class"),c=e.getAttribute("id");return c?(o.unshift(n+"#"+this.trim(c)),o):(i&&r.push(this.classSelector(i)),"html"!==n&&"body"!==n&&e.parentNode&&r.push(":nth-child("+this.nthChild(e)+")"),o.unshift(r.join("")),e.parentNode&&e.parentNode!==t&&e.parentNode.tagName&&this.path(e.parentNode,t,o),o)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}};if(void 0===setCookie){function setCookie(e,t,o){var n=new Date;n.setTime(n.getTime()+1e3*o);var r=0==o?"":";expires="+n.toGMTString();document.cookie=e+"="+t+r+";path=/;domain=.51cto.com"}function getCookie(e){var t=document.cookie.split("; "),o=0;for(o=0;o<t.length;o++){var n=t[o].split("=");if(n[0]==e)return n[1]}return""}}var _51log=function(e){this.init(e)};_51log.prototype={__catchDomThier:5,catchDomTier:5,catchDomType:{A:"A",IMG:"IMG",INPUT:"INPUT",LI:"LI",BUTTON:"BUTTON",P:"P",SPAN:"SPAN",I:"I"},scrollDeepest:0,init:function(e){var t=this;this.catchDomTier=this.__catchDomThier,this.openTime=(new Date).getTime(),this.ps={visitorid:getCookie("51ctologToken")?getCookie("51ctologToken"):"",userAagent:window.navigator.userAgent.replace(/\,/g," "),token:getCookie("51ctologToken")?getCookie("51ctologToken"):"",uid:getCookie("logserveruid")?getCookie("logserveruid"):"",uuid:this.generateUUID(),type:"click",dom:"",domId:"",domInnerTxt:"",price:isNaN(parseFloat(window.course_price))?"":window.course_price,students_count:isNaN(parseFloat(window.students_count))?"":window.students_count,favourite:isNaN(parseFloat(window.favourite))?"":window.favourite,vote:isNaN(parseFloat(window.vote))?"":window.vote,scrolling:"0%",screensize:window.screen.width+"X"+window.screen.height,url:location.href,ref:document.referrer,from:e||""},document.getElementsByTagName("body")[0].onclick=function(e){var o=t.catchDom(e.target);if(t.catchDomTier=t.__catchDomThier,o)if("A"==o.tagName){t.ev({dom:t.getPN2(o),domId:t.getDomId(o),domInnerTxt:t.getDomInnerTxt(o),scrolling:t.getScrollPercent(),type:"clickA"})}else"BUTTON"==o.tagName?t.ev({dom:t.getPN2(o),domId:t.getDomId(o),domInnerTxt:t.getDomInnerTxt(o),scrolling:t.getScrollPercent(),type:"clickBtn"}):t.ev({dom:t.getPN2(o),domId:t.getDomId(o),domInnerTxt:t.getDomInnerTxt(o),scrolling:t.getScrollPercent(),type:"click"})},window.onbeforeunload=function(e){t.ev({type:"close",scrolling:t.getScrollPercent(t.scrollDeepest)})};var o=document.documentElement,n=document.body,r=0,i=null;function c(){r=(window.pageYOffset||o.scrollTop||n.scrollTop)-(o.clientTop||0),setTimeout(function(){r>t.scrollDeepest&&(t.scrollDeepest=r)},0)}function a(){i&&clearTimeout(i),i=setTimeout(c,50)}window.addEventListener?window.addEventListener("scroll",a):window.attachEvent&&window.attachEvent("scroll",a),getCookie("_51ctologStr")&&this.ev(getCookie("_51ctologStr")),this.ev({type:"open"})},ev:function(e){var t=new Image,o=this.copy(this.ps),n="https://logserver.51cto.com/log_server?";if(t.loaded=function(){setCookie("_51ctologStr","",-1)},"string"==typeof e)return!(e.length<10)&&(t.src=n+e,!1);if(e)for(var r in e)o[r]=e[r];o.time=(new Date).getTime();var i=this.str(o);e.type&&"close"==e.type&&(o.duration=o.time-this.openTime,setCookie("_51ctologStr",i=this.str(o))),t.src=n+i},str:function(e){var t="{";for(var o in e)t+=o+':"'+e[o]+'",';return t=(t+="}").replace(",}","}"),"data="+encodeURI(t)},getPN:function(e,t){return t||(t="|"+e.className+"|"+e.id),t=e.tagName+"-"+this.getIndex(e)+(t?">"+t:t),"BODY"==e.parentNode.tagName?t:this.getPN(e.parentNode,t)},getPN2:function(e){return encodeURIComponent(cssPath.getPN2(e))},getIndex:function(e){for(var t=e.parentNode.childNodes,o=[],n=0;n<t.length;n++)1==t[n].nodeType&&o.push(t[n]);for(n=0;n<o.length;n++)if(e==o[n])return n},getDomId:function(e){var t="";return e.id?t=e.id:e.className&&(t=e.className),t},getDomInnerTxt:function(e){var t="";return e.innerText?t=e.innerText.replace("/,/"," "):e.textContent&&(t=e.textContent.replace("/,/"," ")),t},isA:function(e){return"A"==e.tagName?e:!!e.parentNode&&this.isA(e.parentNode)},catchDom:function(e){return this.catchDomType[e.tagName]?e:!!(e.parentNode&&this.catchDomTier>0)&&(this.catchDomTier--,this.catchDom(e.parentNode))},getScrollPercent:function(e){var t=document.documentElement,o=document.body,n=document.documentElement,r=(window.pageYOffset||t.scrollTop)-(t.clientTop||0),i=Math.max(o.scrollHeight,o.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);return e?Math.round(e/i*100)+"%":Math.round(r/i*100)+"%"},copy:function(e){var t={};for(i in e)t[i]=e[i];return t},generateUUID:function(){var e=getCookie("_51ctologuuid");if(e)return setCookie("_51ctologuuid","",-1),e;var t=(new Date).getTime();return"5xxxxxxx-1xxx-cxxx-txxx-oxxxxxyxxxxx".replace(/[xy]/g,function(e){var o=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?o:3&o|8).toString(16)})}};var __51log=new _51log(location.hostname.replace(".51cto.com",""));